YUI.add("moodle-availability_badge-form",function(e,t){M.availability_badge=M.availability_badge||{},M.availability_badge.form=e.Object(M.core_availability.plugin),M.availability_badge.form.badges=null,M.availability_badge.form.nativedatalist="list"in document.createElement("input")&&!!document.createElement("datalist")&&!!window.HTMLDataListElement,M.availability_badge.form.initInner=function(e){this.badges=e},M.availability_badge.form.getNode=function(t){if(this.nativedatalist){var n="<label>"+M.util.get_string("title","availability_badge")+'<input  type="text" name="id" list="badges" placeholder="'+M.util.get_string("choosedots","moodle")+'"></input><span class="form-autocomplete-downarrow">\u25bc</span>';n+='<datalist id="badges">'}else var n="<label>"+M.util.get_string("title","availability_badge")+'<span class="availability-badge"><select name="id">'+'<option id="0" value="choose">'+M.util.get_string("choosedots","moodle")+"</option>";for(var r=0;r<this.badges.length;r++){var i=this.badges[r];n+='<option id="'+i.id+'" value="'+i.name+" ["+i.id+']">'+i.name+" ["+i.id+"]</option>"}this.nativedatalist?n+="</datalist></label>":n+="</select></span></label>";var s=e.Node.create("<span>"+n+"</span>");if(t.creating===undefined)if(this.nativedatalist){var o=s.one('#badges > option[id="'+t.id+'"]');t.id!==undefined&&o&&s.one("input[name=id]").set("value",""+o.get("value"))}else{var o=s.one('select[name=id] > option[id="'+t.id+'"]');t.id!==undefined&&o&&o.set("selected","selected")}if(!M.availability_badge.form.addedEvents){M.availability_badge.form.addedEvents=!0;var u=e.one("#fitem_id_availabilityconditionsjson");this.nativedatalist?u.delegate("input",function(){M.core_availability.form.update()},".availability_badge input"):u.delegate("change",function(){M.core_availability.form.update()},".availability_badge select")}return s},M.availability_badge.form.fillValue=function(e,t){if(this.nativedatalist){var n=t.one("input[name=id]").get("value");if(t.one('#badges option[value="'+n+'"]')){var r=t.one('#badges option[value="'+n+'"]').get("id");e.id=parseInt(r,10)}}else{var n=t.one("select[name=id]").get("value");if(t.one('select[name=id] > option[value="'+n+'"]')){var r=t.one('select[name=id] > option[value="'+n+'"]').get("id");e.id=parseInt(r,10)}}},M.availability_badge.form.fillErrors=function(e,t){var n={};this.fillValue(n,t),(!n.id||n.id&&n.id==="choose")&&e.push("availability_badge:error_selectbadge")}},"@VERSION@",{requires:["base","node","event","moodle-core_availability-form"]});
